package(default_visibility = ["//visibility:public"])

cc_library(
    name = "GL3Plus",
    srcs = [
      'src/GLSL/OgreGLSLExtSupport.cpp',
      'src/GLSL/OgreGLSLMonolithicProgram.cpp',
      'src/GLSL/OgreGLSLMonolithicProgramManager.cpp',
      'src/GLSL/OgreGLSLPreprocessor.cpp',
      'src/GLSL/OgreGLSLProgram.cpp',
      'src/GLSL/OgreGLSLProgramManager.cpp',
      'src/GLSL/OgreGLSLSeparableProgram.cpp',
      'src/GLSL/OgreGLSLSeparableProgramManager.cpp',
      'src/GLSL/OgreGLSLShader.cpp',
      'src/GLSL/OgreGLSLShaderFactory.cpp',
      'src/GLSL/OgreGLSLShaderManager.cpp',
      'src/OgreGL3PlusAsyncTextureTicket.cpp',
      'src/OgreGL3PlusContext.cpp',
      'src/OgreGL3PlusDefaultHardwareBufferManager.cpp',
      'src/OgreGL3PlusEngineDll.cpp',
      'src/OgreGL3PlusHardwareBufferManager.cpp',
      'src/OgreGL3PlusHardwareCounterBuffer.cpp',
      'src/OgreGL3PlusHardwareIndexBuffer.cpp',
      'src/OgreGL3PlusHardwareOcclusionQuery.cpp',
      'src/OgreGL3PlusHardwareShaderStorageBuffer.cpp',
      'src/OgreGL3PlusHardwareUniformBuffer.cpp',
      'src/OgreGL3PlusHardwareVertexBuffer.cpp',
      'src/OgreGL3PlusMappings.cpp',
      'src/OgreGL3PlusPixelFormatToShaderType.cpp',
      'src/OgreGL3PlusPlugin.cpp',
      'src/OgreGL3PlusRenderPassDescriptor.cpp',
      'src/OgreGL3PlusRenderSystem.cpp',
      'src/OgreGL3PlusStagingTexture.cpp',
      'src/OgreGL3PlusSupport.cpp',
      'src/OgreGL3PlusTextureGpu.cpp',
      'src/OgreGL3PlusTextureGpuManager.cpp',
      'src/OgreGL3PlusTextureGpuWindow.cpp',
      'src/OgreGL3PlusVertexArrayObject.cpp',
      'src/Vao/OgreGL3PlusAsyncTicket.cpp',
      'src/Vao/OgreGL3PlusBufferInterface.cpp',
      'src/Vao/OgreGL3PlusConstBufferPacked.cpp',
      'src/Vao/OgreGL3PlusDynamicBuffer.cpp',
      'src/Vao/OgreGL3PlusMultiSourceVertexBufferPool.cpp',
      'src/Vao/OgreGL3PlusStagingBuffer.cpp',
      'src/Vao/OgreGL3PlusTexBufferEmulatedPacked.cpp',
      'src/Vao/OgreGL3PlusTexBufferPacked.cpp',
      'src/Vao/OgreGL3PlusUavBufferPacked.cpp',
      'src/Vao/OgreGL3PlusVaoManager.cpp',
      'src/gl3w.cpp',
      'src/windowing/GLX/OgreGL3PlusUtil.h',
      'src/windowing/GLX/OgreGLXContext.cpp',
      'src/windowing/GLX/OgreGLXGLSupport.cpp',
      'src/windowing/GLX/OgreGLXWindow.cpp',
    ],
    #hdrs = glob([ 'include/*.h', 'include/windowing/*.h', 'include/windowing/GLX/*.h', 'include/Vao/*.h', 'include/GLSL/*.h', 'include/GL/*.h', # Add Windows support here 'src/windowing/GLX/*.h', ]),

    hdrs = [
      'include/windowing/gtk/OgreGTKGLSupport.h',
      'include/windowing/gtk/OgreGTKWindow.h',
      #'include/windowing/SDL/OgreSDLGLSupport.h',
      #'include/windowing/SDL/OgreSDLWindow.h',
      #'include/windowing/SDL/OgreSDLPrerequisites.h',
      'include/OgreGL3PlusHardwareUniformBuffer.h',
      'include/OgreGL3PlusHardwareShaderStorageBuffer.h',
      'include/OgreGL3PlusHardwareVertexBuffer.h',
      'include/OgreGL3PlusTextureGpuManager.h',
      'include/OgreGL3PlusPixelFormatToShaderType.h',
      'include/OgreGL3PlusHardwareOcclusionQuery.h',
      'include/OgreGL3PlusDefaultHardwareBufferManager.h',
      'include/OgreGL3PlusRenderPassDescriptor.h',
      'include/Vao/OgreGL3PlusConstBufferPacked.h',
      'include/Vao/OgreGL3PlusTexBufferEmulatedPacked.h',
      'include/Vao/OgreGL3PlusStagingBuffer.h',
      'include/Vao/OgreGL3PlusAsyncTicket.h',
      'include/Vao/OgreGL3PlusVertexArrayObject.h',
      'include/Vao/OgreGL3PlusUavBufferPacked.h',
      'include/Vao/OgreGL3PlusTexBufferPacked.h',
      'include/Vao/OgreGL3PlusBufferInterface.h',
      'include/Vao/OgreGL3PlusVaoManager.h',
      'include/Vao/OgreGL3PlusMultiSourceVertexBufferPool.h',
      'include/Vao/OgreGL3PlusDynamicBuffer.h',
      'include/OgreGL3PlusTextureGpu.h',
      'include/OgreGL3PlusHardwareBufferManager.h',
      'include/OgreGL3PlusContext.h',
      'include/GLSL/OgreGLSLShader.h',
      'include/GLSL/OgreGLSLProgramManager.h',
      'include/GLSL/OgreGLSLShaderFactory.h',
      'include/GLSL/OgreGLSLShaderManager.h',
      'include/GLSL/OgreGLSLMonolithicProgramManager.h',
      'include/GLSL/OgreGLSLMonolithicProgram.h',
      'include/GLSL/OgreGLSLSeparableProgramManager.h',
      'include/GLSL/OgreGLSLExtSupport.h',
      'include/GLSL/OgreGLSLSeparableProgram.h',
      'include/GLSL/OgreGLSLPreprocessor.h',
      'include/GLSL/OgreGLSLProgram.h',
      'include/OgreGL3PlusPrerequisites.h',
      'include/OgreGL3PlusVertexArrayObject.h',
      'include/OgreGL3PlusStagingTexture.h',
      'include/OgreGL3PlusHardwareCounterBuffer.h',
      'include/OgreGL3PlusAsyncTextureTicket.h',
      'include/OgreGL3PlusHardwareIndexBuffer.h',
      'include/OgreGL3PlusPlugin.h',
      'include/OgreGL3PlusRenderSystem.h',
      'include/OgreGL3PlusTextureGpuWindow.h',
      'include/OgreGL3PlusDescriptorSetTexture.h',
      'include/OgreGL3PlusSupport.h',
      'include/OgreGL3PlusMappings.h',
      'include/OgreGL3PlusHlmsPso.h',
      'include/GL/wglext.h',
      'include/GL/glxtokens-backup.h',
      'include/GL/glxext.h',
      'include/GL/gl3w.h',
      'include/GL/glext.h',
      'include/GL/glcorearb.h',
      #'include/Deprecated/OgreGL3PlusHardwarePixelBuffer.h',
      #'include/Deprecated/OgreGL3PlusTextureManager.h',
      #'include/Deprecated/OgreGL3PlusNullTexture.h',
      #'include/Deprecated/OgreGL3PlusPixelFormat.h',
      #'include/Deprecated/OgreGL3PlusFrameBufferObject.h',
      #'include/Deprecated/OgreGL3PlusTexture.h',
      #'include/Deprecated/OgreGL3PlusFBORenderTexture.h',
      #'include/Deprecated/OgreGL3PlusDepthTexture.h',
      #'include/Deprecated/OgreGL3PlusRenderToVertexBuffer.h',
      #'include/Deprecated/OgreGL3PlusTextureBuffer.h',
      #'include/Deprecated/OgreGL3PlusRenderTexture.h',
      #'include/Deprecated/OgreGL3PlusFBOMultiRenderTarget.h',
      #'include/Deprecated/OgreGL3PlusDepthBuffer.h',
    ] + select({
        "//platforms:win32": [
            'include/windowing/win32/OgreWin32GLSupport.h',
            'include/windowing/win32/OgreWin32Prerequisites.h',
            'include/windowing/win32/OgreWin32Context.h',
            'include/windowing/win32/OgreWin32Window.h',
        ],
        "//platforms:mac": [
            'include/windowing/OSX/OgreOSXCocoaContext.h',
            'include/windowing/OSX/OgreOSXCocoaWindow.h',
            'include/windowing/OSX/OgreOSXCocoaWindowDelegate.h',
            'include/windowing/OSX/OgreOSXGL3PlusSupport.h',
            'include/windowing/OSX/OgreOSXCocoaView.h',
        ],
        "//conditions:default": [
            'src/windowing/GLX/OgreGL3PlusUtil.h',
            'include/windowing/GLX/OgreGLXUtils.h',
            'include/windowing/GLX/OgreGLXWindow.h',
            'include/windowing/GLX/OgreGLXGLSupport.h',
            'include/windowing/GLX/OgreGLXContext.h',
        ],
    }),
    includes = [
        'include',
        'include/GLSL',
        'include/Vao',
    ] + select ({
        "//platforms:win32": [
            'include/windowing/win32',
        ],
        "//conditions:default": [
            'include/windowing/GLX',
            'src/windowing/GLX',
        ],
    }),
    linkopts = select({
        "//platforms:win32": [
        ],
        "//conditions:default": [
            "-lGL",
        ],
    }),
  deps = [
    '//subprojects/ogre2/OgreMain'
  ],
)
